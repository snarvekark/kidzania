{"ast":null,"code":"var _jsxFileName = \"D:\\\\281\\\\Project2\\\\kidzania\\\\client\\\\src\\\\components\\\\upload.js\";\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { getAttributes } from 'react-cognito';\n\nclass Upload extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.componentWillMount = () => {\n      const store = this.context.store;\n      const state = store.getState();\n      this.setState({\n        email: state.cognito.attributes.email\n      });\n    };\n\n    this.onSubmit = event => {\n      const store = this.context.store;\n      const state = store.getState();\n      const user = state.cognito.user;\n      const config = state.cognito.config;\n      event.preventDefault();\n      updateAttributes(user, {\n        email: this.state.email\n      }, config).then(action => {\n        store.dispatch(action);\n        this.setState({\n          error: 'email changed'\n        });\n      }, error => this.setState({\n        error\n      }));\n    };\n\n    this.changeEmail = event => {\n      this.setState({\n        email: event.target.value\n      });\n    };\n\n    this.render = () => React.createElement(\"form\", {\n      onSubmit: this.onSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 43\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 44\n      },\n      __self: this\n    }, this.state.error), React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 45\n      },\n      __self: this\n    }, \"Email address\", React.createElement(\"input\", {\n      value: this.state.email,\n      onChange: this.changeEmail,\n      required: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 47\n      },\n      __self: this\n    })), React.createElement(\"button\", {\n      type: \"submit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49\n      },\n      __self: this\n    }, \"Update\"));\n\n    this.state = {\n      error: '',\n      email: ''\n    };\n  }\n\n}\n\nUpdateEmailForm.contextTypes = {\n  store: PropTypes.object\n};\nexport default Upload;","map":{"version":3,"sources":["D:/281/Project2/kidzania/client/src/components/upload.js"],"names":["React","PropTypes","getAttributes","Upload","Component","constructor","props","componentWillMount","store","context","state","getState","setState","email","cognito","attributes","onSubmit","event","user","config","preventDefault","updateAttributes","then","action","dispatch","error","changeEmail","target","value","render","UpdateEmailForm","contextTypes","object"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,SAASC,aAAT,QAA8B,eAA9B;;AAEA,MAAMC,MAAN,SAAqBH,KAAK,CAACI,SAA3B,CAAqC;AAEnCC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;;AADiB,SAQnBC,kBARmB,GAQE,MAAM;AAAA,YACjBC,KADiB,GACP,KAAKC,OADE,CACjBD,KADiB;AAEzB,YAAME,KAAK,GAAGF,KAAK,CAACG,QAAN,EAAd;AACA,WAAKC,QAAL,CAAc;AAAEC,QAAAA,KAAK,EAAEH,KAAK,CAACI,OAAN,CAAcC,UAAd,CAAyBF;AAAlC,OAAd;AACD,KAZkB;;AAAA,SAcnBG,QAdmB,GAcPC,KAAD,IAAW;AAAA,YACZT,KADY,GACF,KAAKC,OADH,CACZD,KADY;AAEpB,YAAME,KAAK,GAAGF,KAAK,CAACG,QAAN,EAAd;AACA,YAAMO,IAAI,GAAGR,KAAK,CAACI,OAAN,CAAcI,IAA3B;AACA,YAAMC,MAAM,GAAGT,KAAK,CAACI,OAAN,CAAcK,MAA7B;AACAF,MAAAA,KAAK,CAACG,cAAN;AACAC,MAAAA,gBAAgB,CAACH,IAAD,EAAO;AACrBL,QAAAA,KAAK,EAAE,KAAKH,KAAL,CAAWG;AADG,OAAP,EAEbM,MAFa,CAAhB,CAEWG,IAFX,CAGGC,MAAD,IAAY;AACVf,QAAAA,KAAK,CAACgB,QAAN,CAAeD,MAAf;AACA,aAAKX,QAAL,CAAc;AAAEa,UAAAA,KAAK,EAAE;AAAT,SAAd;AACD,OANH,EAOEA,KAAK,IAAI,KAAKb,QAAL,CAAc;AAAEa,QAAAA;AAAF,OAAd,CAPX;AASD,KA7BkB;;AAAA,SA+BnBC,WA/BmB,GA+BJT,KAAD,IAAW;AACvB,WAAKL,QAAL,CAAc;AAAEC,QAAAA,KAAK,EAAEI,KAAK,CAACU,MAAN,CAAaC;AAAtB,OAAd;AACD,KAjCkB;;AAAA,SAmCnBC,MAnCmB,GAmCV,MACP;AAAM,MAAA,QAAQ,EAAE,KAAKb,QAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAM,KAAKN,KAAL,CAAWe,KAAjB,CADF,EAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAEE;AAAO,MAAA,KAAK,EAAE,KAAKf,KAAL,CAAWG,KAAzB;AAAgC,MAAA,QAAQ,EAAE,KAAKa,WAA/C;AAA4D,MAAA,QAAQ,MAApE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFF,CAFF,EAME;AAAQ,MAAA,IAAI,EAAC,QAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBANF,CApCiB;;AAEjB,SAAKhB,KAAL,GAAa;AACXe,MAAAA,KAAK,EAAE,EADI;AAEXZ,MAAAA,KAAK,EAAE;AAFI,KAAb;AAID;;AARkC;;AAgDrCiB,eAAe,CAACC,YAAhB,GAA+B;AAC7BvB,EAAAA,KAAK,EAAEP,SAAS,CAAC+B;AADY,CAA/B;AAIA,eAAe7B,MAAf","sourcesContent":["import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { getAttributes } from 'react-cognito';\r\n\r\nclass Upload extends React.Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      error: '',\r\n      email: '',\r\n    };\r\n  }\r\n\r\n  componentWillMount = () => {\r\n    const { store } = this.context;\r\n    const state = store.getState();\r\n    this.setState({ email: state.cognito.attributes.email });\r\n  }\r\n\r\n  onSubmit = (event) => {\r\n    const { store } = this.context;\r\n    const state = store.getState();\r\n    const user = state.cognito.user;\r\n    const config = state.cognito.config;\r\n    event.preventDefault();\r\n    updateAttributes(user, {\r\n      email: this.state.email,\r\n    }, config).then(\r\n      (action) => {\r\n        store.dispatch(action);\r\n        this.setState({ error: 'email changed' });\r\n      },\r\n      error => this.setState({ error }),\r\n    );\r\n  }\r\n\r\n  changeEmail = (event) => {\r\n    this.setState({ email: event.target.value });\r\n  }\r\n\r\n  render = () => (\r\n    <form onSubmit={this.onSubmit}>\r\n      <div>{this.state.error}</div>\r\n      <label>\r\n        Email address\r\n        <input value={this.state.email} onChange={this.changeEmail} required />\r\n      </label>\r\n      <button type=\"submit\">Update</button>\r\n    </form>\r\n  )\r\n}\r\nUpdateEmailForm.contextTypes = {\r\n  store: PropTypes.object,\r\n};\r\n\r\nexport default Upload;"]},"metadata":{},"sourceType":"module"}